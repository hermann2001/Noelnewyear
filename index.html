<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>Merry Chrismas and Happy New Year</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
      html{
        overflow: hidden;
      }
      #blc{
        background-color: #CC66CC;
        height: 100vh;
        width: 100vw;
      }
      .blc{
        height: 100vh;
        width: 100vw;
        text-align: center;
        color: rgb(255,215,0);
        /*background-color: rgba(24,24,24,0.3);*/
        background-image: url(9ca5cb3cc3_nodam_4005-1024x768-7d315.jpg);
      }
      .Author{
        padding-top:20vh;
        transform:tanslateY(-50%);
        text-align: center;
        font-size: 4em;
      }
      .snow,.snow1, .snow2{/* Un flocon de neige*/
        position: absolute;
        z-index: 10;
        font-weight: bold;
      }
      .snow{
        color:#FFFF00;
      }
      .snow1{
        color:rgb(14, 56, 73);
      }
      .snow2{
        color:#CECECE;
      }
      .merry{
        color: red;
        padding-left: 0.2em;
        font-size:5em;
      }
      .and{
        color: black;
        text-align: center;
        font-size: 5em;
      }
      .year{
        color: rgb(0, 255, 0);
        text-align: right;
        padding-right: 0.2em;
        font-size:5em;
      }
      .an{
        color:#33CCCC;
        text-align: center;
        margin-top: 0.7em;
        font-style: italic;
      }
      *{
        margin: 0;
      }
		</style>
	</head>
	<body>
		<div class="blc">
      <p class="Author">
        d'ALPI Programmer<br>
        Roms Lacrima<br>
        Jose's Lab
      </p>
    </div>
    <script src="jquery-3.5.1.min.js"></script>
    <script>
      function randfunc(min ,max){//Fonction qui génère des nombres aléatoires
	      return Math.floor(Math.random()*(max+1))+min;
      }
      function viewportSize() {// Fonction qui donne les dimensions
        var d = document.documentElement;
        return {
          height: d.clientHeight,
          width: d.clientWidth
        };
      }
      var i=0, id='', txt='', timeOut=0, k=1,l = 0, size1=4, px1 = 0;
      function affich_text( ){
        txt=$(id).attr("data-label");
        showLetters();
      }
      function showLetters()
      {
        if(i < txt.length)
        {
          $(id).append('<span>'+txt[i]+'</span>');
          timeOut = setTimeout(showLetters,200);
            i++;
          } 
          else{
            k++;
            i=0;
          }
        }
      //Fonction principale
      $(function(){
        //Création des flocons
        var flocons = 30;
        var taille = viewportSize();
        var vitesse = [];
        var positionY = [], positionX = [], moveX = [];
        //Initialisation
        for(let i = 1; i <= flocons;i++)
        {
          vitesse[i-1] = randfunc(2,3);
          positionY[i-1] = randfunc(-50,10);
          positionX[i-1] = randfunc(1,taille.width);
          moveX[i-1] = randfunc(-1,1);
        }
        var j = 0, z = 0, size = [10,5] , px = 1;
        setInterval(function(){
          taille=viewportSize();
          if(size1/4==1) px1=0;
          else if(size1/10==1) px1=1;
          if(px1==0 && l==0) size1+=0.0625;
          else if(px1==1 || l==1) size1-=0.125;
          $('.Author').css("font-size",size1+'em');
          if(size1==9 && l==0){
            $('.Author').text('Wish You');
            $('.Author').css("padding-top",40+'vh');
            size1=10;
            l=1;
          }
          else if(size1==4 && l==1){
            $('.blc').remove();
            $('body').append('<div id="blc"></div>');
            l=2;
          }
          else if(l==2){
           $('#blc').append('<p class="merry" data-label="Merry Christmas"></p>');
           $('#blc').append('<p class="and" data-label="&"></p>');
           $('#blc').append('<p class="year" data-label="Happy New Year"></p>');
           $('#blc').append('<p class="an" data-label="2021"></p>');
           for(let i = 1; i <= flocons;i++)
          {
            if(i >= 1 && i <10)
              $('#blc').append('<div class="snow1" id="sn'+i+'">*</div>');
            else if(i >= 10 && i <20)
              $('#blc').append('<div class="snow2" id="sn'+i+'">*</div>');
            else
              $('#blc').append('<div class="snow" id="sn'+i+'">*</div>');
              $('#sn'+i).css({
              "left":positionX[i-1]+'px',
              "font-size":randfunc(3,6)+'em',
              "top":positionY[i-1]+'px'
            });
          }
          l=3;
        }
        else if(l==3){
          if (k==1 && i==0){
            id='.merry';
            affich_text();
          }
          else if(k==2 && i==0){
            id='.and';
            affich_text();
          }
          else if(k==3 && i==0){
            id='.year';
            affich_text();
          }
          else if(k==4 && i==0){
            id='.an';
            affich_text();
            l=4;
          }
          for(let i = 0;i < flocons; i++)
          {
            j = i+1;
            if(positionY[i] >= taille.height)
            {
              positionY[i] = randfunc(-50,-10);
              positionX[i] = randfunc(1,taille.width);
              $('#sn'+j).css({
                "font-size":randfunc(3,6)+'em'
              });
            }
            else
            {
              positionY[i] += vitesse[i];
              positionX[i] += moveX[i];
            } 
            $('#sn'+j).css({
            "top":positionY[i]+'px',
            "left":positionX[i]+'px'
            });
          }
        }
        else if(l==4){
          if(size[0]/10 == 1 && size[1]/5==1 ) px = 1;
          else if(size[0]/5== 1 && size[1]/10==1 ) px = 0;
          if(px == 1){
              size[0] -=0.0625;
              size[1] +=0.0625;
          }
          else if(px == 0){
              size[0] +=0.0625;
              size[1] -=0.0625;
          }
            $('.an').css("font-size",size[0]+'em'); 
            $('.merry').css("font-size",size[1]+'em');
            $('.year').css("font-size",size[1]+'em');
            for(let i = 0;i < flocons; i++)
          {
            j = i+1;
            if(positionY[i] >= taille.height)
            {
              positionY[i] = randfunc(-50,-10);
              positionX[i] = randfunc(1,taille.width);
              $('#sn'+j).css({
                "font-size":randfunc(3,6)+'em'
              });
            }
            else 
            {
              positionY[i] += vitesse[i];
              positionX[i] += moveX[i];
            }
            $('#sn'+j).css({
            "top":positionY[i]+'px',
            "left":positionX[i]+'px'
            });
          }
        }
        },45);
      });
    </script>
	</body>
</html>